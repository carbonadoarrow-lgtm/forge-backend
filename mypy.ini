[mypy]
# Institutional Baseline v2 - Type Safety Configuration
# Grade Target: 85/100+ (currently 45/100)

python_version = 3.11
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = False  # Start lenient, increase over time
disallow_incomplete_defs = False
check_untyped_defs = True
disallow_untyped_decorators = False
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True
show_error_codes = True
show_error_context = True
pretty = True

# Gradually tighten restrictions
# Phase 1: Allow untyped for now (current)
# Phase 2: Set disallow_untyped_defs = True after adding types to 50% of codebase
# Phase 3: Set disallow_incomplete_defs = True after adding types to 80% of codebase
# Phase 4: Enable strict mode after 95% type coverage

# Exclude generated/vendor code
exclude = (?x)(
    ^venv/
    | ^\.venv/
    | ^build/
    | ^dist/
  )

# Per-module overrides for critical modules
[mypy-src.routers.*]
# Start with basic checks, increase strictness later
warn_return_any = True

[mypy-forge.autonomy.*]
# Autonomy system is critical - slightly stricter
disallow_incomplete_defs = True

[mypy-src.storage]
# Storage layer is critical - slightly stricter
disallow_incomplete_defs = True

# Third-party libraries without stubs
[mypy-fastapi.*]
ignore_missing_imports = True

[mypy-pydantic.*]
ignore_missing_imports = True

[mypy-uvicorn.*]
ignore_missing_imports = True
